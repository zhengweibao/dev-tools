# 一个简单的业务工具库
本工具库主要包括相互独立的三个部分：
- 一个基于单点redis的分布式锁工具
	> 在分布式环境中，要保证统一时间只有一个线程执行一段方法逻辑，依靠传统的JAVA并发工具（synchronize, ReentrantLock等）已经无法实现。
	> 因为在分布式系统中同一时刻存在着多个节点，每个节点有多个线程在执行着相同的业务逻辑，而依靠传统并发工具只能保证单节点上的多线程同步。
	> 
	> 分布式锁服务即是一个可以原子性的创建锁和释放锁的服务，它可以保证在分布式环境中，当某个线程获取到锁时，在改锁自然过期或者被手动释放之前，
	> 其他线程无法再次获取到该锁。
- 一个基于rabbitMQ的延时消息工具
	> 在日常业务开发中，我们可能会遇到这样的业务场景：
	>1. 用户在支付系统生成了一个预付单，跳转到具体的支付平台进行付款，因为某些原因，订单支付失败，系统希望在指定时间后清除该预付单。
	>2. 系统为某个直播房间随机生成了一个机器人，需要该机器人在指定时间后主动退出房间。
	>3. 存在不定期开启的活动，服务器需要在活动开启，和结束时刻通知客户端并且运行一些业务代码。
	>
	> 对于上面的业务场景，我们都可以使用延时消息轻松解决：
	>
	> 对于场景一，可以在创建预付单时，发送一条订单清理的延时消息；
	> 对于场景二，可以在创建机器人的同时发送机器人推出的延时消息；
	> 对于场景三，我们可以在活动上线时根据设定时间发送活动开始结束的延时消息；
- 一个基于的redis的榜单工具
	> 在业务开发中，我们经常会接到一些榜单类的业务需求，要求我们根据某些数据来生成一个排行榜。
	> 一般的做法是，通过redis的zset结构，实现榜单逻辑。
	>
	> 但是我们往往还会遇到这样的场景：
	> 对于一个用户积分榜，产品会要求我们生成日榜，周榜，月榜和总榜，那么对于一个用户的积分，
	> 当对用户积分进行更新时，我们需要同时更新四个榜单。
	> 那么在这种场景下，如何保证积分更新的原子性就成了一个亟需解决的问题。
	> 
	> 在这里，我们通过redis脚本实现了多榜单更新，保证了数据更新的原子性并且提供了一层经过良好封装的接口。
	
具体的使用示例请看相应的测试类。